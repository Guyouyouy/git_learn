### **核心操作步骤**

首先，打开终端并进入你的 Git 仓库。

1. **启动交互式变基**
   使用 `git rebase -i` 命令并指定你想要合并的提交范围。例如，如果你想合并最近的 3 次提交，可以执行：

   bash

   ```
   git rebase -i HEAD~3
   ```

   

   - 这里的 `HEAD~3` 表示从当前提交（HEAD）开始往前数的第3个提交。
   - 执行此命令后，会打开一个文本编辑器（如 Vim 或 VSCode），并列出你指定的提交记录。

2. **选择要合并的提交**
   编辑器打开后，你会看到类似这样的内容，提交顺序是**从旧到新**排列的：

   text

   ```
   pick a1b2c3d  提交信息1
   pick e4f5g6h  提交信息2
   pick i7j8k9l  提交信息3
   ```

   

   - **`pick`**：表示保留该次提交。
   - **`squash`（或缩写 `s`）**：表示将此提交合并到前一个提交中，并保留该次提交的日志信息。
   - **`fixup`（或缩写 `f`）**：与 `squash` 类似，但会丢弃此次提交的日志信息。

   为了将多个提交合并为一个，你需要**保留最旧的一次提交为 `pick`，并将其后希望合并的提交前的命令修改为 `squash` 或 `fixup`**。例如，要合并这三条提交，可以修改为：

   text

   ```
   pick a1b2c3d  提交信息1
   squash e4f5g6h  提交信息2
   squash i7j8k9l  提交信息3
   ```

   

   修改完成后，保存并关闭编辑器。

3. **编辑最终的提交信息**
   上一步完成后，Git 会打开一个新的编辑器窗口，让你编辑合并后新提交的最终信息。你会看到所有被合并的提交信息都注释掉了（以 `#` 开头）：

   text

   ```
   # This is a combination of 3 commits.
   # This is the 1st commit message:
   # 提交信息1
   # This is the 2nd commit message:
   # 提交信息2
   # This is the 3rd commit message:
   # 提交信息3
   ```

   

   你可以：

   - **保留一条信息**：删除其他行前的 `#` 号，或重新编写一条新的信息。
   - **编写全新信息**：直接写一段新的提交信息。
     编辑完成后，保存并关闭编辑器。

4. **完成合并**
   如果操作过程中没有出现冲突，至此合并就已经完成了。你可以使用 `git log --oneline` 命令查看简洁的提交历史，确认最近的几次提交已经合并为一条。

### **重要注意事项与替代方案**

⚠️ **强制推送（Force Push）**
如果你的这些提交已经推送（push）到了远程仓库（如 GitHub、GitLab），合并提交属于**重写历史**操作。本地历史改变后，你需要使用强制推送来更新远程仓库：

bash

```
git push --force-with-lease origin <你的分支名>
```



- **`--force-with-lease`** 是比 `--force` 更安全的选项，它在覆盖远程分支前会检查是否有其他人的新提交，避免意外覆盖他人的工作。

🛠️ **处理冲突与中途取消**

- **解决冲突**：如果在变基过程中发生代码冲突，Git 会提示你。你需要手动解决冲突，然后使用 `git add .` 标记冲突已解决，再执行 `git rebase --continue` 继续变基过程。
- **取消操作**：如果在变基过程中想放弃所有操作，可以执行 `git rebase --abort` 回到操作前的状态。

💡 **更快捷的替代方案**
如果你只是想简单快速地合并**最近几次**的提交，并且不介意完全使用一个新的提交信息来覆盖它们，可以使用一个更快捷的命令：

bash

```
git reset --soft HEAD~3 && git commit -m "全新的提交信息"
```



- 这个命令会将 HEAD 指针回退到3个提交之前，但保留所有文件的更改在暂存区（stage），然后创建一个新的提交。
- **注意**：这个方法同样需要强制推送来更新远程仓库。

### 总结

总的来说，`git rebase -i` 是功能最强大、控制最精细的提交合并方法。在进行任何历史重写操作前，尤其是在协作项目中，请确保你了解其影响。

希望这个指南对你有帮助！如果你在操作中遇到更具体的问题，比如如何处理冲突，可以随时再问我。